@model CEGA.Models.ReporteIncapacidad
@{
    ViewData["Title"] = "Crear Incapacidad";
}

<h2 class="mb-3">Agregar nueva incapacidad</h2>

<form asp-action="Crear" method="post" class="row g-3">
    @Html.AntiForgeryToken()
    <div asp-validation-summary="ModelOnly" class="text-danger"></div>

    <div class="col-md-6">
        <label asp-for="NombreReporte" class="form-label"></label>
        <input asp-for="NombreReporte" class="form-control" />
        <span asp-validation-for="NombreReporte" class="text-danger"></span>
    </div>

    <div class="col-md-6">
        <label asp-for="RolSeleccionado" class="form-label"></label>
        <input asp-for="RolSeleccionado" class="form-control" />
        <span asp-validation-for="RolSeleccionado" class="text-danger"></span>
    </div>

    <div class="col-md-6">
        <label asp-for="FechaInicio" class="form-label"></label>
        <input asp-for="FechaInicio" class="form-control" type="date" max="@DateTime.Today.ToString("yyyy-MM-dd")" />
        <span asp-validation-for="FechaInicio" class="text-danger"></span>
    </div>

    <div class="col-md-6">
        <label asp-for="FechaFin" class="form-label"></label>
        <input asp-for="FechaFin" class="form-control" type="date" max="@DateTime.Today.ToString("yyyy-MM-dd")" />
        <span asp-validation-for="FechaFin" class="text-danger"></span>
    </div>

    <div class="col-12">
        <button type="submit" class="btn btn-primary">Guardar</button>
        <a asp-action="Index" class="btn btn-outline-secondary">Cancelar</a>
    </div>
</form>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script>
        // Validación rápida en cliente: fin >= inicio
        (function(){
            const ini = document.querySelector('[name="FechaInicio"]');
            const fin = document.querySelector('[name="FechaFin"]');
            function sync() {
                if (ini && fin) fin.min = ini.value;
            }
            if (ini && fin) {
                ini.addEventListener('change', sync);
                window.addEventListener('DOMContentLoaded', sync);
            }
        })();
    </script>
}